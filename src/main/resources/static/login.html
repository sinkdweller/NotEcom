<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
</head>
<script>
    async function doLogin(){
        
        const user = document.getElementById("u").value;
        const pass = document.getElementById("p").value;
        const response = await fetch("/api/auth", {
            method: "POST",
            headers: {'Content-type': 'Application/json'},
            body: JSON.stringify({
                username: user,
                password: pass
            }
            )
        })
        const data = await response.json();
        if(data.token){
            localStorage.setItem('token', data.token);
            alert("login success!");
            //uncomment when implementing this
            // window.location.href = "/dashboard.html
        }
        else{
            alert("login not successful");
        }
        
    }
</script>

<h1>Login</h1>
<input id="u" type="text" placeholder="Username">
<input id="p" type="password" placeholder="Password">
<button onclick="doLogin()">Login</button>

</html>